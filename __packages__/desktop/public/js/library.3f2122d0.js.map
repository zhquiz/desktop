{"version":3,"sources":["webpack:///./src/views/Library.vue?087b","webpack:///./src/components/LibraryCard.vue?9712","webpack:///./src/components/LibraryCard.vue?a33a","webpack:///./src/components/LibraryCard.vue?126f","webpack:///./src/components/LibraryCard.vue","webpack:///./src/views/Library.vue?124f","webpack:///./src/views/Library.vue?8f67","webpack:///./src/views/Library.vue","webpack:///./src/components/LibraryCard.vue?c80e","webpack:///./node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js","webpack:///./src/views/Library.vue?2682"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","q","q0","attrs","directives","name","rawName","value","expression","domProps","target","composing","_v","staticStyle","openEditModal","_l","local","it","i","key","id","title","entries","description","additionalContext","count","perPage","p","page","model","callback","$$v","$set","_e","online","isEditModal","edited","entryString","doUpdate","doCreate","staticRenderFns","scopedSlots","_u","fn","props","evt","selected","currentData","$refs","context","open","_s","isOpen","t","class","getTagClass","ref","additional","reload","srsLevel","tagClassMap","lv","length","api","post","type","select","data","result","map","entry","$forceUpdate","item","c","filter","a","arr","indexOf","default","components","ContextMenu","watch","component","tag","handler","doDelete","get","params","then","r","fetch","encodeURIComponent","json","put","$buefy","snackbar","updateLocal","patch","delete","$route","query","Array","isArray","$router","push","join","s","out","m","re","exec","LibraryCard","created","window","frameElement","parseInt","getAttribute","parent","setName","Promise","all","updateOnline","_createForOfIteratorHelper","o","allowArrayLike","Symbol","iterator","unsupportedIterableToArray","F","n","done","e","f","TypeError","err","normalCompletion","didErr","step","next","_e2"],"mappings":"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","file":"js/library.3f2122d0.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('div',{staticClass:\"LibraryPage\"},[_c('form',{staticClass:\"field is-grouped\",on:{\"submit\":function($event){$event.preventDefault();_vm.q = _vm.q0}}},[_c('b-field',{staticClass:\"is-expanded\",attrs:{\"label\":\"Search\",\"label-position\":\"on-border\"}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.q0),expression:\"q0\"}],staticClass:\"input\",attrs:{\"type\":\"search\",\"name\":\"q\",\"placeholder\":\"Type here to search\",\"aria-label\":\"search\"},domProps:{\"value\":(_vm.q0)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.q0=$event.target.value}}})])],1),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column\"},[_c('section',{staticClass:\"card\"},[_c('div',{staticClass:\"card-content\"},[_c('h2',{staticClass:\"title is-4\"},[_vm._v(\" User library \"),_c('button',{staticClass:\"button is-success\",staticStyle:{\"float\":\"right\"},on:{\"click\":function($event){return _vm.openEditModal()}}},[_vm._v(\" Create a list \")])]),_vm._l((_vm.local.result),function(it,i){return _c('LibraryCard',{key:i,attrs:{\"id\":it.id,\"title\":it.title,\"entries\":it.entries,\"description\":it.description,\"additional\":_vm.additionalContext(it)}})}),(_vm.local.count > _vm.local.perPage)?_c('b-pagination',{attrs:{\"total\":_vm.local.count,\"per-page\":_vm.local.perPage,\"icon-prev\":\"angle-left\",\"icon-next\":\"angle-right\"},on:{\"change\":function (p) { return (_vm.local.page = p); }},model:{value:(_vm.local.page),callback:function ($$v) {_vm.$set(_vm.local, \"page\", $$v)},expression:\"local.page\"}}):_vm._e()],2)])]),_c('div',{staticClass:\"column\"},[_c('section',{staticClass:\"card\"},[_c('div',{staticClass:\"card-content\"},[_c('h2',{staticClass:\"title is-4\"},[_vm._v(\"Online library\")]),_vm._l((_vm.online.result),function(it,i){return _c('LibraryCard',{key:i,attrs:{\"title\":it.title,\"entries\":it.entries,\"description\":it.description}})}),(_vm.online.count > _vm.online.perPage)?_c('b-pagination',{attrs:{\"total\":_vm.online.count,\"per-page\":_vm.online.perPage,\"icon-prev\":\"angle-left\",\"icon-next\":\"angle-right\"},on:{\"change\":function (p) { return (_vm.online.page = p); }},model:{value:(_vm.online.page),callback:function ($$v) {_vm.$set(_vm.online, \"page\", $$v)},expression:\"online.page\"}}):_vm._e()],2)])])])]),_c('b-modal',{model:{value:(_vm.isEditModal),callback:function ($$v) {_vm.isEditModal=$$v},expression:\"isEditModal\"}},[_c('div',{staticClass:\"card\"},[_c('header',{staticClass:\"card-header\"},[(!_vm.edited.id)?_c('div',{staticClass:\"card-header-title\"},[_vm._v(\"New list\")]):_c('div',{staticClass:\"card-header-title\"},[_vm._v(\"Edit list\")])]),_c('div',{staticClass:\"card-content\"},[_c('b-field',{attrs:{\"label\":\"Title\"}},[_c('b-input',{attrs:{\"placeholder\":\"Must not be empty\"},model:{value:(_vm.edited.title),callback:function ($$v) {_vm.$set(_vm.edited, \"title\", $$v)},expression:\"edited.title\"}})],1),_c('b-field',{attrs:{\"label\":\"Entries\"}},[_c('b-input',{attrs:{\"type\":\"textarea\",\"placeholder\":\"Space separated, must not be empty\"},model:{value:(_vm.entryString),callback:function ($$v) {_vm.entryString=$$v},expression:\"entryString\"}})],1),_c('b-field',{attrs:{\"label\":\"Description\"}},[_c('b-input',{attrs:{\"type\":\"textarea\"},model:{value:(_vm.edited.description),callback:function ($$v) {_vm.$set(_vm.edited, \"description\", $$v)},expression:\"edited.description\"}})],1),_c('b-field',{attrs:{\"label\":\"Tag\"}},[_c('b-input',{model:{value:(_vm.edited.tag),callback:function ($$v) {_vm.$set(_vm.edited, \"tag\", $$v)},expression:\"edited.tag\"}})],1)],1),_c('footer',{staticClass:\"card-footer\"},[_c('div',{staticClass:\"card-footer-item\"},[_c('button',{staticClass:\"button is-success\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.edited.id ? _vm.doUpdate() : _vm.doCreate()}}},[_vm._v(\" Save \")]),_c('button',{staticClass:\"button is-cancel\",attrs:{\"type\":\"button\"},on:{\"click\":function($event){_vm.isEditModal = false}}},[_vm._v(\" Cancel \")])])])])])],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('b-collapse',{staticClass:\"card\",attrs:{\"animation\":\"slide\"},scopedSlots:_vm._u([{key:\"trigger\",fn:function(props){return _c('div',{staticClass:\"card-header\",attrs:{\"role\":\"button\"}},[_c('p',{staticClass:\"card-header-title\",on:{\"contextmenu\":function($event){$event.preventDefault();return (function (evt) {\n            _vm.selected = _vm.currentData\n            _vm.$refs.context.open(evt)\n          })($event)}}},[_vm._v(\" \"+_vm._s(_vm.title)+\" \")]),_c('a',{staticClass:\"card-header-icon\"},[_c('b-icon',{attrs:{\"icon\":props.open ? 'caret-down' : 'caret-up'}})],1)])}}]),model:{value:(_vm.isOpen),callback:function ($$v) {_vm.isOpen=$$v},expression:\"isOpen\"}},[_c('div',{staticClass:\"card-content\"},[_c('div',_vm._l((_vm.currentData),function(t){return _c('span',{key:t,staticClass:\"tag clickable\",class:_vm.getTagClass(t),on:{\"contextmenu\":function($event){$event.preventDefault();return (function (evt) {\n              _vm.selected = [t]\n              _vm.$refs.context.open(evt)\n            })($event)}}},[_vm._v(\" \"+_vm._s(t)+\" \")])}),0)])]),_c('ContextMenu',{ref:\"context\",attrs:{\"type\":\"vocab\",\"entry\":_vm.selected,\"description\":_vm.title + ' ' + _vm.description,\"additional\":_vm.additional},on:{\"quiz:added\":function (evt) { return _vm.reload(evt.entries); },\"quiz:removed\":function (evt) { return _vm.reload(evt.entries); }}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { api } from '@/assets/api'\nimport { Vue, Component, Ref, Prop } from 'vue-property-decorator'\nimport ContextMenu from './ContextMenu.vue'\n\n@Component<LibraryCard>({\n  components: {\n    ContextMenu\n  },\n  watch: {\n    isOpen () {\n      if (this.isOpen) {\n        this.reload(this.currentData)\n      }\n    },\n    entries () {\n      this.isOpen = false\n    }\n  }\n})\nexport default class LibraryCard extends Vue {\n  @Prop() title!: string\n  @Prop() entries!: string[]\n  @Prop({ default: '' }) description?: string\n\n  @Prop({ default: () => [] }) additional!: {\n    name: string;\n    handler: () => void;\n  }[]\n\n  @Ref() context!: ContextMenu\n\n  isOpen = false\n\n  selected: string[] = []\n  srsLevel: {\n    [entry: string]: number;\n  } = {}\n\n  readonly tagClassMap = [\n    (lv: number) => (lv > 2 ? 'is-success' : ''),\n    (lv: number) => (lv > 0 ? 'is-warning' : ''),\n    (lv: number) => (lv === 0 ? 'is-danger' : '')\n  ]\n\n  get currentData () {\n    return this.entries.filter((a, i, arr) => arr.indexOf(a) === i)\n  }\n\n  async reload (entries: string[]) {\n    if (entries.length > 0) {\n      const {\n        data: { result = [] }\n      } = await api.post<{\n        result: {\n          entry: string;\n          srsLevel: number | null;\n        }[];\n      }>('/api/quiz/srsLevel', {\n        entries,\n        type: 'vocab',\n        select: ['entry', 'srsLevel']\n      })\n\n      // eslint-disable-next-line array-callback-return\n      entries.map((entry) => {\n        delete this.srsLevel[entry]\n      })\n\n      // eslint-disable-next-line array-callback-return\n      result.map(({ entry, srsLevel }) => {\n        this.srsLevel[entry] = typeof srsLevel === 'number' ? srsLevel : -1\n      })\n\n      this.$set(this, 'srsLevel', this.srsLevel)\n      this.$forceUpdate()\n    }\n  }\n\n  getTagClass (item: string) {\n    const srsLevel = this.srsLevel[item]\n\n    if (typeof srsLevel !== 'undefined') {\n      if (srsLevel === -1) {\n        return 'is-info'\n      }\n\n      for (const fn of this.tagClassMap) {\n        const c = fn(srsLevel)\n        if (c) {\n          return c\n        }\n      }\n    }\n\n    return 'is-light'\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LibraryCard.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LibraryCard.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./LibraryCard.vue?vue&type=template&id=58f6a876&scoped=true&\"\nimport script from \"./LibraryCard.vue?vue&type=script&lang=ts&\"\nexport * from \"./LibraryCard.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./LibraryCard.vue?vue&type=style&index=0&id=58f6a876&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"58f6a876\",\n  null\n  \n)\n\nexport default component.exports","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { api } from '@/assets/api'\nimport { Component, Vue, Watch } from 'vue-property-decorator'\nimport LibraryCard from '@/components/LibraryCard.vue'\n\ninterface ILocal {\n  id: string;\n  title: string;\n  entries: string[];\n  description: string;\n  tag: string;\n}\n\n@Component<LibraryPage>({\n  components: {\n    LibraryCard\n  },\n  async created () {\n    const { frameElement } = window\n    if (frameElement) {\n      const id = parseInt(frameElement.getAttribute('data-id') || '')\n      window.parent.setName(id, 'Library')\n    }\n    await Promise.all([this.updateLocal(), this.updateOnline()])\n  }\n})\nexport default class LibraryPage extends Vue {\n  q0 = ''\n  isEditModal = false\n\n  local: {\n    result: ILocal[];\n    count: number;\n    page: number;\n    perPage: number;\n  } = {\n    result: [],\n    count: 0,\n    page: 1,\n    perPage: 10\n  }\n\n  online: {\n    result: {\n      title: string;\n      entries: string[];\n    }[];\n    count: number;\n    page: number;\n    perPage: number;\n  } = {\n    result: [],\n    count: 0,\n    page: 1,\n    perPage: 10\n  }\n\n  edited: ILocal = {\n    id: '',\n    title: '',\n    entries: [],\n    description: '',\n    tag: ''\n  }\n\n  get q () {\n    const q = this.$route.query.q\n    return (Array.isArray(q) ? q[0] : q) || ''\n  }\n\n  set q (q: string) {\n    this.$router.push({ query: { q } })\n  }\n\n  get entryString () {\n    return this.edited.entries.join(' ')\n  }\n\n  set entryString (s) {\n    const out: string[] = []\n\n    let m: RegExpExecArray | null = null\n    const re = /\\p{sc=Han}+/gu\n    while ((m = re.exec(s))) {\n      out.push(m[0])\n    }\n\n    this.edited.entries = out\n  }\n\n  additionalContext (it: ILocal) {\n    if (!it.id) {\n      return []\n    }\n\n    return [\n      {\n        name: 'Edit list',\n        handler: () => {\n          this.openEditModal()\n        }\n      },\n      {\n        name: 'Delete list',\n        handler: () => {\n          this.doDelete(it.id)\n        }\n      }\n    ]\n  }\n\n  openEditModal (it?: ILocal) {\n    this.edited = it || {\n      id: '',\n      title: '',\n      entries: [],\n      description: '',\n      tag: ''\n    }\n\n    this.isEditModal = true\n  }\n\n  @Watch('q')\n  @Watch('local.page')\n  async updateLocal () {\n    const r = await api\n      .get('/api/library/q', {\n        params: {\n          q: this.q,\n          page: this.local.page,\n          perPage: this.local.perPage\n        }\n      })\n      .then((r) => r.data)\n\n    this.local = {\n      ...this.local,\n      ...r\n    }\n  }\n\n  @Watch('q')\n  @Watch('online.page')\n  async updateOnline () {\n    const r = await fetch(\n      `https://www.zhquiz.cc/api/library?q=${encodeURIComponent(\n        this.q\n      )}&page=${encodeURIComponent(\n        this.online.page\n      )}&perPage=${encodeURIComponent(this.online.perPage)}`\n    ).then((r) => r.json())\n\n    this.online = {\n      ...this.online,\n      ...r\n    }\n  }\n\n  async doCreate () {\n    await api.put('/api/library', this.edited)\n    this.$buefy.snackbar.open(`Created list: ${this.edited.title}`)\n    this.isEditModal = false\n\n    this.local.page = 1\n    await this.updateLocal()\n  }\n\n  async doUpdate () {\n    await api.patch('/api/library', this.edited, {\n      params: {\n        id: this.edited.id\n      }\n    })\n\n    this.$buefy.snackbar.open(`Updated list: ${this.edited.title}`)\n    this.isEditModal = false\n\n    this.local.page = 1\n    await this.updateLocal()\n  }\n\n  async doDelete (id: string) {\n    await api.delete('/api/library', {\n      params: {\n        id\n      }\n    })\n\n    this.$buefy.snackbar.open(`Deleted list: ${this.edited.title}`)\n\n    this.local.page = 1\n    await this.updateLocal()\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Library.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Library.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Library.vue?vue&type=template&id=11e6d410&scoped=true&\"\nimport script from \"./Library.vue?vue&type=script&lang=ts&\"\nexport * from \"./Library.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Library.vue?vue&type=style&index=0&id=11e6d410&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"11e6d410\",\n  null\n  \n)\n\nexport default component.exports","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./LibraryCard.vue?vue&type=style&index=0&id=58f6a876&scoped=true&lang=css&\"","import unsupportedIterableToArray from \"@babel/runtime/helpers/esm/unsupportedIterableToArray\";\nexport default function _createForOfIteratorHelper(o, allowArrayLike) {\n  var it;\n\n  if (typeof Symbol === \"undefined\" || o[Symbol.iterator] == null) {\n    if (Array.isArray(o) || (it = unsupportedIterableToArray(o)) || allowArrayLike && o && typeof o.length === \"number\") {\n      if (it) o = it;\n      var i = 0;\n\n      var F = function F() {};\n\n      return {\n        s: F,\n        n: function n() {\n          if (i >= o.length) return {\n            done: true\n          };\n          return {\n            done: false,\n            value: o[i++]\n          };\n        },\n        e: function e(_e) {\n          throw _e;\n        },\n        f: F\n      };\n    }\n\n    throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n  }\n\n  var normalCompletion = true,\n      didErr = false,\n      err;\n  return {\n    s: function s() {\n      it = o[Symbol.iterator]();\n    },\n    n: function n() {\n      var step = it.next();\n      normalCompletion = step.done;\n      return step;\n    },\n    e: function e(_e2) {\n      didErr = true;\n      err = _e2;\n    },\n    f: function f() {\n      try {\n        if (!normalCompletion && it[\"return\"] != null) it[\"return\"]();\n      } finally {\n        if (didErr) throw err;\n      }\n    }\n  };\n}","export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Library.vue?vue&type=style&index=0&id=11e6d410&scoped=true&lang=css&\""],"sourceRoot":""}