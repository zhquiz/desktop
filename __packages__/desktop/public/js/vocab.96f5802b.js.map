{"version":3,"sources":["webpack:///./src/views/Vocab.vue?b844","webpack:///./src/views/Vocab.vue?1b02","webpack:///./src/views/Vocab.vue?d444","webpack:///./src/views/Vocab.vue?f9d4","webpack:///./src/views/Vocab.vue"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","on","$event","preventDefault","q","q0","directives","name","rawName","value","expression","attrs","domProps","target","composing","class","simplified","length","evt","openContext","_v","_s","i","entries","staticStyle","current","scopedSlots","_u","key","fn","props","open","pinyin","traditional","english","sentenceKey","sentences","_l","s","chinese","ref","selected","entry","type","additionalContext","sentenceDef","staticRenderFns","find","$containsString","slice","$route","query","api","get","params","levelMin","$accessor","level","result","data","window","frameElement","id","parseInt","getAttribute","parent","setName","loadContent","onQChange","context","test","then","r","qs","filter","h","arr","indexOf","keepRest","toneToNumber","Math","random","it","findOne","Array","isArray","$router","push","handler","components","ContextMenu","watch","component"],"mappings":"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","file":"js/vocab.96f5802b.js","sourcesContent":["export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Vocab.vue?vue&type=style&index=0&id=19b820a5&scoped=true&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('section',[_c('div',{staticClass:\"VocabPage\"},[_c('form',{staticClass:\"field\",on:{\"submit\":function($event){$event.preventDefault();_vm.q = _vm.q0}}},[_c('div',{staticClass:\"control\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.q0),expression:\"q0\"}],staticClass:\"input\",attrs:{\"type\":\"search\",\"name\":\"q\",\"placeholder\":\"Type here to search.\",\"aria-label\":\"search\"},domProps:{\"value\":(_vm.q0)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.q0=$event.target.value}}})])]),_c('div',{staticClass:\"columns\"},[_c('div',{staticClass:\"column is-6 entry-display\"},[_c('div',{class:_vm.simplified.length > 3 ? 'smaller-vocab-display' : 'vocab-display'},[_c('div',{staticClass:\"clickable text-center font-zh-simp\",on:{\"contextmenu\":function($event){$event.preventDefault();return (function (evt) { return _vm.openContext(evt, _vm.simplified, 'vocab'); })($event)}}},[_vm._v(\" \"+_vm._s(_vm.simplified)+\" \")])]),_c('div',{staticClass:\"buttons has-addons\"},[_c('button',{staticClass:\"button\",attrs:{\"disabled\":_vm.i < 1},on:{\"click\":function($event){_vm.i--},\"keypress\":function($event){_vm.i--}}},[_vm._v(\" Previous \")]),_c('button',{staticClass:\"button\",attrs:{\"disabled\":_vm.i > _vm.entries.length - 2},on:{\"click\":function($event){_vm.i++},\"keypress\":function($event){_vm.i++}}},[_vm._v(\" Next \")])])]),_c('div',{staticClass:\"column is-6\"},[_c('b-collapse',{staticClass:\"card\",staticStyle:{\"margin-bottom\":\"1em\"},attrs:{\"animation\":\"slide\",\"open\":typeof _vm.current === 'object'},scopedSlots:_vm._u([{key:\"trigger\",fn:function(props){return _c('div',{staticClass:\"card-header\",attrs:{\"role\":\"button\"}},[_c('h2',{staticClass:\"card-header-title\"},[_vm._v(\"Reading\")]),_c('a',{staticClass:\"card-header-icon\",attrs:{\"role\":\"button\"}},[_c('fontawesome',{attrs:{\"icon\":props.open ? 'caret-down' : 'caret-up'}})],1)])}}])},[_c('div',{staticClass:\"card-content\"},[_c('span',[_vm._v(_vm._s(_vm.current.pinyin))])])]),_c('b-collapse',{staticClass:\"card\",attrs:{\"animation\":\"slide\",\"open\":!!_vm.current.traditional},scopedSlots:_vm._u([{key:\"trigger\",fn:function(props){return _c('div',{staticClass:\"card-header\",attrs:{\"role\":\"button\"}},[_c('h2',{staticClass:\"card-header-title\"},[_vm._v(\"Traditional\")]),_c('a',{staticClass:\"card-header-icon\",attrs:{\"role\":\"button\"}},[_c('fontawesome',{attrs:{\"icon\":props.open ? 'caret-down' : 'caret-up'}})],1)])}}])},[_c('div',{staticClass:\"card-content\"},[_c('div',{staticClass:\"font-zh-trad clickable\",on:{\"contextmenu\":function($event){$event.preventDefault();return (function (evt) { return _vm.openContext(evt, _vm.current.traditional, 'vocab'); })($event)}}},[_vm._v(\" \"+_vm._s(_vm.current.traditional)+\" \")])])]),_c('b-collapse',{staticClass:\"card\",attrs:{\"animation\":\"slide\",\"open\":!!_vm.current.english},scopedSlots:_vm._u([{key:\"trigger\",fn:function(props){return _c('div',{staticClass:\"card-header\",attrs:{\"role\":\"button\"}},[_c('h2',{staticClass:\"card-header-title\"},[_vm._v(\"English\")]),_c('a',{staticClass:\"card-header-icon\",attrs:{\"role\":\"button\"}},[_c('fontawesome',{attrs:{\"icon\":props.open ? 'caret-down' : 'caret-up'}})],1)])}}])},[_c('div',{staticClass:\"card-content\"},[_c('span',[_vm._v(_vm._s(_vm.current.english))])])]),_c('b-collapse',{key:_vm.sentenceKey,staticClass:\"card\",attrs:{\"animation\":\"slide\",\"open\":!!_vm.sentences().length},scopedSlots:_vm._u([{key:\"trigger\",fn:function(props){return _c('div',{staticClass:\"card-header\",attrs:{\"role\":\"button\"}},[_c('h2',{staticClass:\"card-header-title\"},[_vm._v(\"Sentences\")]),_c('a',{staticClass:\"card-header-icon\",attrs:{\"role\":\"button\"}},[_c('fontawesome',{attrs:{\"icon\":props.open ? 'caret-down' : 'caret-up'}})],1)])}}])},[_c('div',{staticClass:\"card-content\"},_vm._l((_vm.sentences()),function(s,i){return _c('div',{key:i,staticClass:\"sentence-entry\"},[_c('span',{staticClass:\"clickable\",on:{\"contextmenu\":function($event){$event.preventDefault();return (function (evt) { return _vm.openContext(evt, s.chinese, 'sentence'); })($event)}}},[_vm._v(\" \"+_vm._s(s.chinese)+\" \")]),_c('span',[_vm._v(_vm._s(s.english))])])}),0)])],1)])]),_c('ContextMenu',{ref:\"context\",attrs:{\"entry\":_vm.selected.entry,\"type\":_vm.selected.type,\"additional\":_vm.additionalContext,\"pinyin\":_vm.sentenceDef.pinyin,\"english\":_vm.sentenceDef.english}})],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\nimport { Component, Ref, Vue } from 'vue-property-decorator'\nimport toPinyin from 'chinese-to-pinyin'\nimport ContextMenu from '@/components/ContextMenu.vue'\nimport { api } from '@/assets/api'\nimport { findSentence, zhSentence } from '@/assets/db'\n\n@Component<VocabPage>({\n  components: {\n    ContextMenu\n  },\n  watch: {\n    q () {\n      this.onQChange(this.q)\n    },\n    current () {\n      this.loadContent()\n    }\n  }\n})\nexport default class VocabPage extends Vue {\n  @Ref() context!: ContextMenu\n\n  entries: (\n    | string\n    | {\n        simplified: string;\n        traditional?: string;\n        pinyin: string;\n        english?: string;\n      }\n  )[] = []\n\n  i = 0\n\n  selected: {\n    entry: string;\n    type: string;\n  } = {\n    entry: '',\n    type: ''\n  }\n\n  q0 = ''\n\n  sentenceKey = 0\n\n  sentences () {\n    return zhSentence\n      .find({\n        chinese: {\n          $containsString:\n            typeof this.current === 'string'\n              ? this.current\n              : this.current.simplified\n        }\n      })\n      .slice(0, 10)\n  }\n\n  get sentenceDef () {\n    if (this.selected.type !== 'sentence') {\n      return {}\n    }\n\n    const it = zhSentence.findOne({ chinese: this.selected.entry })\n    if (!it) {\n      return {}\n    }\n\n    return {\n      pinyin: {\n        [this.selected.entry]: it.pinyin\n      },\n      english: {\n        [this.selected.entry]: it.english\n      }\n    }\n  }\n\n  get q () {\n    const q = this.$route.query.q\n    return (Array.isArray(q) ? q[0] : q) || ''\n  }\n\n  set q (q: string) {\n    this.$router.push({ query: { q } })\n  }\n\n  get current () {\n    const r = this.entries[this.i]\n    if (typeof r === 'string') {\n      if (/\\p{sc=Han}/u.test(r)) {\n        return r\n      }\n      return ''\n    }\n\n    return r || ''\n  }\n\n  get simplified () {\n    return typeof this.current === 'string'\n      ? this.current\n      : this.current.simplified\n  }\n\n  async created () {\n    let entry = this.$route.query.entry as string\n\n    if (!(entry || this.q)) {\n      const {\n        data: { result }\n      } = await api.get<{\n        result: string;\n      }>('/api/vocab/random', {\n        params: {\n          levelMin: this.$accessor.levelMin,\n          level: this.$accessor.level\n        }\n      })\n\n      entry = result\n    }\n\n    this.q0 = entry || this.q\n\n    if (entry) {\n      const { frameElement } = window\n      if (frameElement) {\n        const id = parseInt(frameElement.getAttribute('data-id') || '')\n        window.parent.setName(id, (entry ? entry + ' - ' : '') + 'Vocab')\n      }\n\n      this.entries = [entry]\n      await this.loadContent()\n    } else {\n      await this.onQChange(this.q0)\n    }\n  }\n\n  get additionalContext () {\n    if (!this.q) {\n      return [\n        {\n          name: 'Reload',\n          handler: async () => {\n            const {\n              data: { result }\n            } = await api.get<{\n              result: string;\n            }>('/api/vocab/random')\n\n            this.q0 = result\n          }\n        }\n      ]\n    }\n\n    return []\n  }\n\n  openContext (\n    evt: MouseEvent,\n    entry = this.selected.entry,\n    type = this.selected.type\n  ) {\n    this.selected = { entry, type }\n    this.context.open(evt)\n  }\n\n  async onQChange (q: string) {\n    const { frameElement } = window\n    if (frameElement) {\n      const id = parseInt(frameElement.getAttribute('data-id') || '')\n      window.parent.setName(id, (q ? q + ' - ' : '') + 'Vocab')\n    }\n\n    if (/\\p{sc=Han}+/u.test(q)) {\n      let qs = await api\n        .get<{\n          result: string[];\n        }>('/api/chinese/jieba', { params: { q } })\n        .then((r) => r.data.result)\n\n      qs = qs\n        .filter((h) => /\\p{sc=Han}+/u.test(h))\n        .filter((h, i, arr) => arr.indexOf(h) === i)\n\n      this.entries = qs\n    } else {\n      this.entries = [q]\n    }\n\n    await this.loadContent()\n\n    this.i = 0\n  }\n\n  async loadContent () {\n    let entry = this.entries[this.i]\n    if (!entry) {\n      return\n    }\n\n    if (typeof entry === 'string') {\n      if (/\\p{sc=Han}/u.test(entry)) {\n        const {\n          data: { result }\n        } = await api.get('/api/vocab', {\n          params: {\n            entry\n          }\n        })\n\n        if (result.length > 0) {\n          entry = result[0].simplified\n          this.entries = [\n            ...this.entries.slice(0, this.i),\n            ...result,\n            ...this.entries.slice(this.i + 1)\n          ]\n        } else {\n          this.entries = [\n            ...this.entries.slice(0, this.i),\n            {\n              simplified: entry,\n              pinyin: toPinyin(entry, { keepRest: true, toneToNumber: true })\n            },\n            ...this.entries.slice(this.i + 1)\n          ]\n        }\n      } else {\n        const {\n          data: { result }\n        } = await api.get('/api/vocab/q', {\n          params: {\n            q: entry\n          }\n        })\n\n        if (result.length > 0) {\n          entry = result[0].simplified\n        } else {\n          entry = ''\n        }\n\n        this.entries = [\n          ...this.entries.slice(0, this.i),\n          ...result,\n          ...this.entries.slice(this.i + 1)\n        ]\n      }\n    }\n\n    if (!entry) {\n      return\n    }\n\n    if (\n      await findSentence(\n        typeof entry === 'string' ? entry : entry.simplified,\n        10\n      )\n    ) {\n      this.sentenceKey = Math.random()\n    }\n  }\n}\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Vocab.vue?vue&type=script&lang=ts&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--13-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/ts-loader/index.js??ref--13-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./Vocab.vue?vue&type=script&lang=ts&\"","import { render, staticRenderFns } from \"./Vocab.vue?vue&type=template&id=19b820a5&scoped=true&\"\nimport script from \"./Vocab.vue?vue&type=script&lang=ts&\"\nexport * from \"./Vocab.vue?vue&type=script&lang=ts&\"\nimport style0 from \"./Vocab.vue?vue&type=style&index=0&id=19b820a5&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"19b820a5\",\n  null\n  \n)\n\nexport default component.exports"],"sourceRoot":""}