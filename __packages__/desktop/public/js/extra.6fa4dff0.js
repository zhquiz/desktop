(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["extra"],{"018b":function(e,t,n){},"50a4":function(e,t,n){"use strict";n.r(t);var a=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("section",[n("div",{staticClass:"ExtraPage container"},[n("form",{staticClass:"field is-grouped",on:{submit:function(t){t.preventDefault(),e.q=e.q0}}},[n("b-field",{staticClass:"is-expanded",attrs:{label:"Search","label-position":"on-border"}},[n("input",{directives:[{name:"model",rawName:"v-model",value:e.q0,expression:"q0"}],staticClass:"input",attrs:{type:"search",name:"q",placeholder:"Type here to search","aria-label":"search"},domProps:{value:e.q0},on:{input:function(t){t.target.composing||(e.q0=t.target.value)}}})]),n("button",{staticClass:"control button is-success",attrs:{type:"button"},on:{click:e.onNewItem}},[e._v(" Add new item ")])],1),n("b-table",{attrs:{data:e.tableData,columns:e.tableHeader,paginated:"","backend-pagination":"",total:e.count,"per-page":e.perPage,"current-page":e.page,"backend-sorting":"","default-sort":[e.sort.key,e.sort.type]},on:{"update:currentPage":function(t){e.page=t},"update:current-page":function(t){e.page=t},contextmenu:e.onTableContextmenu,sort:e.onSort}})],1),n("b-modal",{model:{value:e.isEditModal,callback:function(t){e.isEditModal=t},expression:"isEditModal"}},[n("div",{staticClass:"card"},[n("header",{staticClass:"card-header"},[e.selected.id?n("div",{staticClass:"card-header-title"},[e._v("Edit item")]):n("div",{staticClass:"card-header-title"},[e._v("New item")])]),n("div",{staticClass:"card-content"},[n("b-field",{attrs:{label:"Chinese"}},[n("b-input",{attrs:{placeholder:"Must not be empty"},model:{value:e.selected.chinese,callback:function(t){e.$set(e.selected,"chinese",t)},expression:"selected.chinese"}})],1),n("b-field",{attrs:{label:"Pinyin"}},[n("b-input",{attrs:{placeholder:"Must not be empty"},model:{value:e.selected.pinyin,callback:function(t){e.$set(e.selected,"pinyin",t)},expression:"selected.pinyin"}})],1),n("b-field",{attrs:{label:"English"}},[n("b-input",{attrs:{type:"textarea",placeholder:"Must not be empty"},model:{value:e.selected.english,callback:function(t){e.$set(e.selected,"english",t)},expression:"selected.english"}})],1),n("b-field",{attrs:{label:"Type"}},[n("b-select",{model:{value:e.selected.type,callback:function(t){e.$set(e.selected,"type",t)},expression:"selected.type"}},[n("option",{attrs:{value:"vocab"}},[e._v("Vocab")]),n("option",{attrs:{value:"sentence"}},[e._v("Sentence")]),1===e.selected.chinese.length?n("option",{attrs:{value:"hanzi"}},[e._v(" Hanzi ")]):e._e()])],1),n("b-field",{attrs:{label:"Description"}},[n("b-input",{attrs:{type:"textarea"},model:{value:e.selected.description,callback:function(t){e.$set(e.selected,"description",t)},expression:"selected.description"}})],1),n("b-field",{attrs:{label:"Tag"}},[n("b-input",{model:{value:e.selected.tag,callback:function(t){e.$set(e.selected,"tag",t)},expression:"selected.tag"}})],1)],1),n("footer",{staticClass:"card-footer"},[n("div",{staticClass:"card-footer-item"},[n("button",{staticClass:"button is-success",attrs:{type:"button"},on:{click:function(t){e.selected.id?e.doUpdate():e.doCreate()}}},[e._v(" Save ")]),n("button",{staticClass:"button is-cancel",attrs:{type:"button"},on:{click:function(t){e.isEditModal=!1}}},[e._v(" Cancel ")])])])])]),n("ContextMenu",{ref:"context",attrs:{id:e.selected.id,entry:e.selected.chinese,type:e.selected.type||"vocab",description:e.selected.description,source:"extra",additional:e.additionalContext},on:{deleted:e.doDelete}})],1)},i=[],s=(n("a4d3"),n("e01a"),n("99af"),n("96cf"),n("1da1")),r=n("d4ec"),c=n("bee2"),o=n("262e"),l=n("2caf"),d=n("9ab4"),u=n("1b40"),p=n("6825"),h=n("02ef"),b=n("5962"),f=n.n(b),v=function(e){Object(o["a"])(n,e);var t=Object(l["a"])(n);function n(){var e;return Object(r["a"])(this,n),e=t.apply(this,arguments),e.q0="",e.count=0,e.perPage=10,e.page=1,e.tableData=[],e.tableHeader=[{field:"chinese",label:"Chinese",sortable:!0},{field:"pinyin",label:"Pinyin",sortable:!0},{field:"english",label:"English",sortable:!0,width:"40vw"}],e.isEditModal=!1,e.sort={key:"updatedAt",type:"desc"},e.selected={id:"",chinese:"",pinyin:"",english:"",type:"vocab",description:"",tag:""},e.additionalContext=[{name:"Edit item",handler:function(){e.openEditModal()}},{name:"Delete item",handler:function(){e.doDelete()}}],e}return Object(c["a"])(n,[{key:"openEditModal",value:function(){this.selected.pinyin||(this.selected.pinyin=f()(this.selected.chinese,{keepRest:!0,toneToNumber:!0})),this.isEditModal=!0}},{key:"load",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].get("/api/extra/q",{params:{q:this.q,page:this.page,perPage:this.perPage,sort:["".concat("desc"===this.sort.type?"-":"").concat(this.sort.key)],select:["id","chinese","pinyin","english","type","description","tag"]}});case 2:t=e.sent,n=t.data,a=n.result,i=n.count,this.tableData=a,this.count=i;case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"doCreate",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){var t,n,a,i,s,r;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selected.description=this.selected.description||" ",this.selected.tag=this.selected.tag||" ",e.next=4,h["a"].put("/api/extra",this.selected);case 4:if(t=e.sent,n=t.data,a=n.existing,i=n.id,!i){e.next=16;break}return e.next=11,this.context.addToQuiz();case 11:return this.$buefy.snackbar.open("Added extra: ".concat(this.selected.chinese," to quiz")),e.next=14,this.load();case 14:e.next=21;break;case 16:if(!a){e.next=21;break}return s=a.type,r=a.entry,e.next=20,h["a"].put("/api/quiz",{entries:[r],type:s,source:"extra"});case 20:this.$buefy.snackbar.open("Added ".concat(s,": ").concat(r," to quiz"));case 21:return this.isEditModal=!1,e.next=24,this.load();case 24:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"doUpdate",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.selected.description=this.selected.description||" ",this.selected.tag=this.selected.tag||" ",e.next=4,h["a"].patch("/api/extra",this.selected,{params:{id:this.selected.id}});case 4:return this.$buefy.snackbar.open("Updated extra: ".concat(this.selected.chinese)),this.isEditModal=!1,e.next=8,this.load();case 8:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"doDelete",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,h["a"].delete("/api/extra",{params:{id:this.selected.id}});case 2:return this.$buefy.snackbar.open("Deleted extra: ".concat(this.selected.chinese)),e.next=5,this.load();case 5:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onNewItem",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:this.selected={id:"",chinese:"",pinyin:"",english:"",type:"vocab",description:"",tag:""},this.isEditModal=!0;case 2:case"end":return e.stop()}}),e,this)})));function t(){return e.apply(this,arguments)}return t}()},{key:"onTableContextmenu",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n.preventDefault(),this.selected=t,e.next=4,this.context.open(n);case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"onSort",value:function(){var e=Object(s["a"])(regeneratorRuntime.mark((function e(t,n){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return this.sort.key=t,this.sort.type=n,e.next=4,this.load();case 4:case"end":return e.stop()}}),e,this)})));function t(t,n){return e.apply(this,arguments)}return t}()},{key:"q",get:function(){var e=this.$route.query.q;return(Array.isArray(e)?e[0]:e)||""},set:function(e){this.$router.push({query:{q:e}})}}]),n}(u["d"]);Object(d["a"])([Object(u["c"])()],v.prototype,"context",void 0),Object(d["a"])([Object(u["e"])("page"),Object(u["e"])("perPage"),Object(u["e"])("q")],v.prototype,"load",null),v=Object(d["a"])([Object(u["a"])({components:{ContextMenu:p["a"]},created:function(){var e=window,t=e.frameElement;if(t){var n=parseInt(t.getAttribute("data-id")||"");window.parent.setName(n,"Extra")}this.load()}})],v);var y=v,m=y,g=(n("799a"),n("2877")),x=Object(g["a"])(m,a,i,!1,null,"74632afc",null);t["default"]=x.exports},"799a":function(e,t,n){"use strict";n("018b")}}]);
//# sourceMappingURL=extra.6fa4dff0.js.map